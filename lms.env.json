DATABASES:
  default:
    ENGINE: django.db.backends.mysql
    NAME: edxapp
    USER: root
    PASSWORD: "1234"
    HOST: localhost
    PORT: 3306
  student_module_history:
    ENGINE: django.db.backends.mysql
    NAME: edxapp
    USER: root
    PASSWORD: "1234"
    HOST: localhost
    PORT: 3306

MONGODB_SETTINGS:
  db: edxapp
  host: localhost
  port: 27017
  username: root
  password: "1234"

FEATURES:
  ENABLE_COURSE_DISCOVERY: true
  ENABLE_DISCUSSION_SERVICE: false
  # Enable Learning MFE
  ENABLE_LEARNING_MICROFRONTEND: true
  # Enable MFE Config API
  ENABLE_MFE_CONFIG_API: true
  # Redirect to courseware after enrollment (makes "Enroll Now" go to Learning MFE)
  REDIRECT_TO_COURSEWARE_AFTER_ENROLLMENT: true
  # Enable course home redirect to MFE
  ENABLE_COURSE_HOME_REDIRECT: true
  # Enable courseware MFE for all learners
  ENABLE_COURSEWARE_MICROFRONTEND: true

LMS_ROOT_URL: "http://localhost:18000"
CMS_ROOT_URL: "http://localhost:18010"

# Learning MFE URL - Required for course content to redirect to the Learning MFE
LEARNING_MICROFRONTEND_URL: "http://localhost:2000"

# Courseware MFE Base URL (same as Learning MFE for course learning experience)
COURSEWARE_MICROFRONTEND_URL: "http://localhost:2000"

# Enable learner dashboard MFE (replaces traditional dashboard)
ENABLE_LEARNER_HOME_MFE: true
LEARNER_HOME_MICROFRONTEND_URL: "http://localhost:1996"

# Celery configuration for development
CELERY_ALWAYS_EAGER: true
BROKER_URL: "memory://"
CELERY_BROKER_TRANSPORT: "memory"
CELERY_BROKER_HOSTNAME: "localhost"
CELERY_RESULT_BACKEND: "cache+memory://"
CELERY_TASK_ALWAYS_EAGER: true
CELERY_EAGER_PROPAGATES_EXCEPTIONS: true

# Allow iframe embedding for FastAPI service
X_FRAME_OPTIONS: "ALLOW"

# CORS settings for iframe embedding and MFE integration
CORS_ORIGIN_WHITELIST:
  - "http://localhost:8000"
  - "http://127.0.0.1:8000"
  - "http://localhost:3000"
  - "http://127.0.0.1:3000"
  # Learning MFE
  - "http://localhost:2000"
  - "http://127.0.0.1:2000"
  # Authoring MFE
  - "http://localhost:2001"
  - "http://127.0.0.1:2001"
  # Learner Dashboard MFE
  - "http://localhost:1996"
  - "http://127.0.0.1:1996"

# Content Security Policy for iframe embedding
CSP_FRAME_ANCESTORS:
  - "'self'"
  - "http://localhost:8000"
  - "http://127.0.0.1:8000"
  - "http://localhost:3000"
  - "http://127.0.0.1:3000"

# Session configuration for better reliability
SESSION_COOKIE_SECURE: false
CSRF_COOKIE_SECURE: false
SESSION_COOKIE_SAMESITE: "Lax"
SESSION_ENGINE: django.contrib.sessions.backends.db
SESSION_COOKIE_HTTPONLY: false
SESSION_COOKIE_AGE: 2419200
SESSION_SAVE_EVERY_REQUEST: true
SESSION_COOKIE_DOMAIN: null
SESSION_COOKIE_PATH: "/"
SESSION_COOKIE_NAME: "sessionid"
SESSION_EXPIRE_AT_BROWSER_CLOSE: false

# OAuth2 Provider Configuration for Studio SSO
OAUTH_ENFORCE_SECURE: false
OAUTH_OIDC_ISSUER: "http://localhost:18000/oauth2"

# OAuth2 Provider Settings - Define allowed scopes
OAUTH2_PROVIDER:
  SCOPES:
    read: "Read access"
    write: "Write access"
    email: "Access to email address"
    profile: "Access to profile information"
    user_id: "Access to user ID"
  DEFAULT_SCOPES:
    - "read"
    - "email"
    - "profile"
    - "user_id"

# Enable MFE Config API to serve configuration to frontend applications
ENABLE_MFE_CONFIG_API: true

# MFE Configuration - Common settings for all Micro Frontends
MFE_CONFIG:
  BASE_URL: "http://localhost:18010"
  LMS_BASE_URL: "http://localhost:18000"
  STUDIO_BASE_URL: "http://localhost:18010"
  LOGIN_URL: "http://localhost:18000/login"
  LOGOUT_URL: "http://localhost:18000/logout"
  LOGO_URL: "http://localhost:18000/static/images/logo.png"
  SITE_NAME: "edX"
  LANGUAGE_PREFERENCE_COOKIE_NAME: "openedx-language-preference"
  ACCESS_TOKEN_COOKIE_NAME: "edx-jwt-cookie-header-payload"
  REFRESH_ACCESS_TOKEN_ENDPOINT: "http://localhost:18000/login_refresh"
  CSRF_TOKEN_API_PATH: "/csrf/api/v1/token"
  
# MFE-specific overrides
MFE_CONFIG_OVERRIDES:
  authoring:
    BASE_URL: "http://localhost:2001"
    STUDIO_BASE_URL: "http://localhost:18010"
  learning:
    BASE_URL: "http://localhost:2000"
    LMS_BASE_URL: "http://localhost:18000"
    STUDIO_BASE_URL: "http://localhost:18010"
    ENABLE_JUMPNAV: "true"
    DISCUSSIONS_MFE_BASE_URL: "http://localhost:2002"
  learner-dashboard:
    BASE_URL: "http://localhost:1996"
    LMS_BASE_URL: "http://localhost:18000"
    STUDIO_BASE_URL: "http://localhost:18010"
    LEARNING_BASE_URL: "http://localhost:2000"


ICG_WEBHOOK_ENABLED: true
ICG_WEBHOOK_URL: "http://localhost:8000/webhook/course-completed"